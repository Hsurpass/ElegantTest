## ✅ atan2(y, x) 与 atan(y / x) 的区别

| 特性          | atan(y / x)  | atan2(y, x)                 |
| ------------ | ------------ | --------------------------- |
| 参数          | 单个值 y / x | 两个参数：y 和 x            |
| 返回值范围     | (-π/2, π/2)  | [-π, π]                     |
| 0            | 0            | 0                           |
| 能否判断象限   | ❌ 不能       | ✅ 可以，能正确处理 4 个象限 |



## ✅ `atan2(y, x)` 的常见用途

- 计算向量方向角（方向的绝对值）
- 计算两个方向之间的夹角
- 图形编程中对象的旋转角度
- 游戏开发中角色朝向
- 地图方向判断（如从 A 到 B 的航向角）



## ✅ 图示理解（方向角）

| 点 (x, y) | `atan2(y, x)` 结果 |
| --------- | ------------------ |
| (1, 0)    | 0°（右）           |
| (0, 1)    | 90°（上）          |
| (-1, 0)   | 180°（左）         |
| (0, -1)   | -90°（下）         |



`atan2(y, x)` 并没有一个像普通函数那样的单一闭式公式，它是一个**系统内置函数**，通常由底层数学库==根据 `y` 和 `x` 的符号==和大小**选择适当的象限并计算反正切值**。

------



## ✅ `atan2(y, x)` 背后的原理

`atan2(y, x)` 实际上是一个 **增强版的 `atan(y / x)`**，其主要作用是：

1. 根据 `x` 和 `y` 的值来判断向量 `(x, y)` 所在的象限；
2. 计算出该向量与正 x 轴的夹角（弧度），范围为 `[-π, π]`。



## 📐 数学定义（象限判断逻辑）

下面是 `atan2(y, x)` 的分段数学定义：

![image-20250529160834522](/home/user/me/ElegantTest/test_math/atan_atan2/image/image-20250529160834522.png)



------

## 🔍 举例说明

| `x`  | `y`  | `y/x` | `atan(y/x)` | `atan2(y, x)`     | 象限     |
| ---- | ---- | ----- | ----------- | ----------------- | -------- |
| 1    | 1    | 1     | 45°         | 45°               | 第一象限 |
| -1   | 1    | -1    | -45°        | 135°（+π）        | 第二象限 |
| -1   | -1   | 1     | 45°         | -135°（−π + 45°） | 第三象限 |
| 1    | -1   | -1    | -45°        | -45°              | 第四象限 |



## ✅ 总结

- `atan2(y, x)` 是根据 `(x, y)` 的方向来判断 **向量与正 x 轴的夹角**；
- 它比 `atan(y/x)` 更可靠，因为能自动判断象限并避免除 0 错误；
- 在图形编程、物理仿真、地图导航等场景中非常常用。

------
